<div class="card-body border-bottom">
  <div class="row">
    <div class="col-md-6">
      <p><strong>Folio: </strong>{{ solicitudCompra.folio }}</p>
      <p>
        <strong>Usuario solicita: </strong
        >{{ solicitudCompra.usuario_solicita }}
      </p>
      <p><strong>Empresa: </strong>CAS</p>
    </div>
    <div class="col-md-6">
      <p><strong>Fecha: </strong>{{ solicitudCompra.fecha }}</p>
      <p>
        <strong>Usuario Destino: </strong>{{ solicitudCompra.usuario_destino }}
      </p>
      <p><strong>Motivo: </strong>{{ solicitudCompra.motivo }}</p>
    </div>
  </div>
  <div class="d-flex justify-content-center" *ngIf="isLoad">
    <div class="spinner-border" role="status">
      <span class="visually-hidden">Loading...</span>
    </div>
  </div>
  <table class="table table-striped table-hover table-sm table-bordered table-responsive" id="tableCompraInsumos" *ngIf="!isLoad">
    <thead class="table-light">
      <tr>
        <th>Cantidad</th>
        <th>Unidad de Medida</th>
        <th>Descripci√≥n</th>
        <th>Observaciones</th>
        <th>Ref. Img</th>
        <th *ngFor="let prov of cotProv">Proveedor: {{ prov.proveedores_id.nombre }}</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let row of detalles; let i = index" >
        <td class="text-center">{{ row.cantidad }}</td>
        <td>{{ row.unidadMedida.nombre }} ({{ row.unidadMedida.abreviatura }})</td>
        <td>{{ row.descripcion }}</td>
        <td>{{ row.observaciones }}</td>
        <td>
          <a *ngIf="row.img_referencia" href="javascript:void(0);" class="btn btn-info btn-sm" (click)="openModal(content, row.img_referencia)">
            <i class="fas fa-eye"></i>
          </a>
        </td>
        <td *ngFor="let prov of cotProv">
          <input type="text" [(ngModel)]="row['precio_' + prov.proveedores_id.id]" placeholder="Precio" class="form-control" (change)="updateTotals()" />
        </td>
      </tr>
    </tbody>
    <tfoot>
      <tr *ngIf="mostrarTotal">
        <td colspan="5">Total</td>
        <td *ngFor="let prov of cotProv">{{ totals['precio_' + prov.proveedores_id.id] | currency }}</td>
      </tr>
    </tfoot>
  </table>
  
  <hr />
</div>
<!-- termina card body -->
<!-- Modal -->
<ng-template #content let-modal>
  <div class="modal-header">
    <h5 class="modal-title" id="exampleModalLabel">Img. referencia</h5>
    <button
      type="button"
      class="btn-close"
      data-bs-dismiss="modal"
      aria-label="Close"
      id="close-modal"
      (click)="modalRef?.hide()"
    ></button>
  </div>
  <div class="modal-body">
    <img
      [src]="selectedImage"
      class="img-fluid rounded"
      style="max-width: 100%; height: auto"
      alt="Imagen de referencia"
    />
  </div>
  <div class="modal-footer">
    <button
      type="button"
      class="btn btn-secondary btn-sm"
      data-bs-dismiss="modal"
      (click)="modalRef?.hide()"
    >
      Cerrar
    </button>
  </div>
</ng-template>
